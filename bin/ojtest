#!/usr/bin/env node

(function(mod)
{
    if (typeof exports == "object" && typeof module == "object")
        return mod(exports, require("objj-runtime")); // CommonJS
    if (typeof define == "function" && define.amd)
        return define(["exports", "objj-runtime"], mod); // AMD
    mod(this.objjOjtest || (this.objjOjtest = {}), ObjectiveJ); // Plain browser env
})(function(exports, objjRuntime)
{
"use strict";

// Add path to './Frameworks' in this module to the search path
var moduleBasePath = new CFURL(process.mainModule.path);
var newURL = new CFURL("Frameworks", moduleBasePath).asDirectoryPathURL();
objjRuntime.StaticResource.includeURLs().push(newURL);

// Inject path to the OJTest main Objective-J file into the arguments so it is the file to be executed.
var args = process.argv.slice(); // Copy
var pathToOJTest = new CFURL("src/ojtest.j", moduleBasePath).absoluteString();
args.splice(2, 0, pathToOJTest);

// Compile, load and run it
objjRuntime.run(args);

});
